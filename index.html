<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>

	<link type="text/css" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>

	<title>LifeMeter</title>

	<!--[if lte IE 8]><script type="text/javascript" src="excanvas.js"></script><![endif]-->



	<script type="text/javascript" src="style-config.js"></script>

	<script type="text/javascript">
		window.onload = function() {

			setDefaultInput();
			generateMeters();
		}

		function setDefaultInput() {
			document.getElementById('input-month').value = 3;
			document.getElementById('input-day').value = 12;
			document.getElementById('input-year').value = 1984;
			document.getElementById('input-gender-male').checked = 'checked';

			document.getElementById('go').addEventListener('click', generateMeters);
		}

		function generateMeters() {
			var configs = new StyleConfigs().styles;
			var container = document.getElementById('meters');

			while (container.firstChild) container.removeChild(container.firstChild);

			var month = document.getElementById('input-month').value;
			var day = document.getElementById('input-day').value;
			var year = document.getElementById('input-year').value;
			var gender = getSelectedGender();

			for (var i = 0; i < configs.length; i++) {
				var iframe = getiFrame(configs[i], month, day, year, gender);
				container.appendChild(iframe);
			}
		}

		function getSelectedGender() {
			var radios = document.getElementsByName('gender');

			for (var i = 0, length = radios.length; i < length; i++) {
				if (radios[i].checked) {
					return(radios[i].value);
				}
			}

			return '';
		}

		function getiFrame(style, month, day, year, gender) {
			var meter = document.createElement('iframe');
			meter.src = 'lifemeter.html?month=' + month + '&day=' + day + '&year=' + year + '&gender=' + gender + '&style=' + style.shortName;
			meter.className = 'lifemeter style-' + style.shortName;
			meter.height = style.height;
			meter.width = style.width;
			meter.style = 'border: 0; overflow: hidden; margin: 0; padding: 0';
			meter.scrolling = 'no';

			return meter;			
		}
	</script>


</head>
<body>

	<nav class="navbar navbar-default navbar-static-top">
		<div class="container">
			<div class="navbar-header">
				<a class="navbar-brand" href="#">LifeMeter</a>
			</div>
			<form id="input" class="navbar-form navbar-left">
				<div class="form-group">
					<label for="input-month">Month</label>
					<input type="text" class="form-control" id="input-month" />
				</div>
				<div class="form-group">
					<label for="input-day">Day</label>
					<input type="text" class="form-control" id="input-day" />
				</div>
				<div class="form-group">
					<label for="input-year">Year</label>
					<input type="text" class="form-control" id="input-year"/>
				</div>
				<label class="radio-inline">
					<input type="radio" name="gender" id="input-gender-male" value="male"> Male
				</label>
				<label class="radio-inline">
					<input type="radio" name="gender" id="input-gender-female" value="female"> Female
				</label>


				<button type="button" class="btn btn-default" id="go">Go</button>
			</form>
		</div>
	</nav>

	<div class="container">
		<div class="row">
			<div id="meters"></div>
		</div>
	</div>


</body>
</html>