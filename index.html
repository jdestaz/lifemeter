<!DOCTYPE html>
<html>
<head>
	<!--[if lte IE 8]><script type="text/javascript" src="excanvas.js"></script><![endif]-->

	<script type="text/javascript" src="style-config.js"></script>

	<script type="text/javascript">
		window.onload = function () {

			setDefaultInput();
			generateMeters();
		}

		function setDefaultInput() {
			document.getElementById('input-month').value = 3;
			document.getElementById('input-day').value = 12;
			document.getElementById('input-year').value = 1984;
			document.getElementById('input-gender-male').checked = 'checked';

			document.getElementById('go').addEventListener('click', generateMeters);
		}

		function generateMeters() {
			var configs = new StyleConfigs().styles;
			var container = document.getElementById('meters');

			while (container.firstChild) container.removeChild(container.firstChild);

			var month = document.getElementById('input-month').value;
			var day = document.getElementById('input-day').value;
			var year = document.getElementById('input-year').value;
			var gender = getSelectedGender();

			for (var i = 0; i < configs.length; i++) {
				var style = configs[i];
				var meter = document.createElement('iframe');
				meter.src = 'lifemeter.html?month=' + month + '&day=' + day + '&year=' + year + '&gender=' + gender + '&style=' + style.shortName;
				meter.className = 'lifemeter style-' + style.shortName;
				meter.height = style.height;
				meter.width = style.width;
				meter.style = 'border: 0; overflow: hidden; margin: 0; padding: 0';
				meter.scrolling = 'no';

				container.appendChild(meter);
			}
		}

		function getSelectedGender() {
			var radios = document.getElementsByName('gender');

			for (var i = 0, length = radios.length; i < length; i++) {
				if (radios[i].checked) {
					return(radios[i].value);
				}
			}

			return '';
		}
	</script>

	
</head>
<body>
	<div id="input">
		Month <input type="text" id="input-month"/><br/>
		Day <input type="text" id="input-day"/><br/>
		Year <input type="text" id="input-year"/><br/>
		Gender <label><input type="radio" name="gender" id="input-gender-male" value="male" /> Male</label> <label><input type="radio" name="gender" id="input-gender-female" value="female" /> Female</label><br/>
		<button type="button" id="go">Go</button>
	</div>

	<div id="meters"></div>

</body>
</html>